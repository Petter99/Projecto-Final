<!-- src/app/features/api-tester/components/response-viewer/response-viewer.component.html -->
<div class="response-viewer">
    <h2 class="section-title">Respuesta</h2>
  
    <!-- Loading State -->
    <div class="loading-state" *ngIf="loading">
      <div class="spinner"></div>
      <p>Ejecutando petición...</p>
    </div>
  
    <!-- Empty State -->
    <div class="empty-state" *ngIf="!loading && !response">
      <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
              d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
      </svg>
      <p>No hay respuesta aún</p>
      <span>Ejecuta una petición para ver los resultados</span>
    </div>
  
    <!-- Response Content -->
    <div class="response-content" *ngIf="!loading && response">
      <!-- Status and Metrics -->
      <div class="metrics-container">
        <div class="metric-card">
          <span class="metric-label">Status</span>
          <div class="status-badge" [ngClass]="statusClass">
            <span class="status-code">{{ response.statusCode }}</span>
            <span class="status-text">{{ response.statusText }}</span>
          </div>
        </div>
  
        <div class="metric-card">
          <span class="metric-label">Tiempo de Respuesta</span>
          <div class="metric-value">
            <span class="time-value">{{ response.responseTime }}</span>
            <span class="time-unit">ms</span>
          </div>
        </div>
      </div>
  
      <!-- Error Message -->
      <div class="error-message" *ngIf="response.error">
        <svg class="error-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
          <strong>Error:</strong>
          <p>{{ response.error }}</p>
        </div>
      </div>
  
      <!-- Body Response -->
      <div class="body-section">
        <div class="body-header">
          <h3 class="subsection-title">Body</h3>
          <button 
            class="btn-copy" 
            (click)="copyToClipboard()"
            *ngIf="formattedBody"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
            </svg>
            Copiar
          </button>
        </div>
        
        <pre class="code-block" *ngIf="formattedBody"><code>{{ formattedBody }}</code></pre>
        
        <div class="empty-body" *ngIf="!formattedBody">
          <p>Sin contenido en el body</p>
        </div>
      </div>
    </div>
  </div>